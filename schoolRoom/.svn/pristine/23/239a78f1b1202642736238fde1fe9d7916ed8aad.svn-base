<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>商学院直播页</title>
  <link rel="stylesheet" href="static/jquery.mCustomScrollbar.min.css" />
  <style type="text/css">
    ::-webkit-scrollbar {
      width: 5px;
      height: 10px
    }
    ::-webkit-scrollbar-button:vertical {
      display: none
    }
    ::-webkit-scrollbar-corner,
    ::-webkit-scrollbar-track {
      background-color: #fff
    }
    ::-webkit-scrollbar-thumb {
      border-radius: 5px;
      background-color: rgba(0, 0, 0, .3)
    }
    ::-webkit-scrollbar-thumb:vertical:hover {
      background-color: rgba(0, 0, 0, .35)
    }
    ::-webkit-scrollbar-thumb:vertical:active {
      background-color: rgba(0, 0, 0, .38)
    }
    *,body,html {
      margin: 0;
      padding: 0;
      font-family: 'Microsoft Yahei'
    }
    .container {
      width: 100%;
      position: absolute;
      box-sizing: border-box;
      top: 240px;
      bottom: 0;
      overflow: hidden;
      cursor: pointer
    }
    .container .flash-box {
      position: relative;
      width: 100%;
      min-height: 24px;
      background-color: #282830;
    }
    .container .flash-box .flash-box-btn {
      position: absolute;
      width: 100%;
      height: 24px;
      overflow: hidden;
      z-index: 10;
    }
    .container .flash-box .flash-box-btn span {
      background-color: #282830;
    }
    .fr {
      float: right;
    }
    .fl {
      float: left;
    }
    .container .flash-box .flash-box-btn .move {
      background: url('static/image/icon.png') no-repeat 0 -48px;
    }

    .container .flash-box .flash-box-btn a {
      display: inline-block;
      width: 24px;
      height: 24px;
    }

    .container .flash-box .flash {
      width: 100%;
      height: 180px;
    }

    .header {
      position: absolute;
      width: 100%;
      height: 36px;
      line-height: 36px;
      top:178px;
      background-color: #201f25;
      z-index: 3
    }

    .header a {
      width: 50%;
      float: left;
      text-align: center;
      text-decoration: none;
      color: #ddd
    }

    .header a.active {
      background-color: #f33;
      color: #fff
    }
    .header1 {
      position: absolute;
      width: 100%;
      height: 36px;
      line-height: 36px;
      top:0;
      background-color: #201f25;
      z-index: 3
    }

    .header1 a {
      width: 33.3%;
      float: left;
      text-align: center;
      text-decoration: none;
      color: #ddd
    }

    .header1 a.active {
      background-color: #f33;
      color: #fff
    }

    .chatmsg-box,.question-msg-box,.notice-note-box,.notice-course-box{
      padding-top: 45px;
      padding-bottom: 80px;
      box-sizing: border-box;
      height: 100%;
      display: none;
      overflow-y: auto;
      background-color: #444;
      color: #bcbcbc;
      font-size: 14px
    }
    .course-box,.note-box,.msg-box{
      padding-top: 45px;
      padding-bottom: 80px;
      box-sizing: border-box;
      height: 100%;
      display: none;
      overflow-y: auto;
      background-color: #282830;
      color: #bcbcbc;
      font-size: 14px
    }
    .notice-msg-box {
      padding-top: 36px;
      box-sizing: border-box;
      height: 100%;
      display: none;
      overflow-y: auto;
      background-color: #444;
      color: #bcbcbc;
      font-size: 14px
    }

    .notice-msg-box ul,.question-msg-box ul,.chatmsg-box ul,.notice-note-box ul,.notice-course-box ul{
      list-style: none
    }
    .msg-box ul,.course-box ul,.note-box ul{
      list-style: none
    }
    .notice-msg-box ul>li,.question-msg-box ul>li,.chatmsg-box ul>li,.notice-note-box ul>li,.notice-course-box ul>li{
      padding: 10px 22px
    }
    .msg-box ul>li,.course-box ul>li,.note-box ul>li{
      padding: 10px 22px
    }

    .notice-msg-box ul>li>div,.question-msg-box ul>li>div,.chatmsg-box ul>li>div,.notice-note-box ul>li>div,.notice-course-box ul>li>div{
      width: 100%;
      word-wrap: break-word;
      overflow: hidden
    }
    .msg-box ul>li>div,.course-box ul>li>div,.note-box ul>li>div{
      width: 100%;
      word-wrap: break-word;
      overflow: hidden
    }
    .notice-msg-box ul>li>span,.question-msg-box ul>li>span,.chatmsg-box ul>li>span,.notice-note-box ul>li>span,.notice-course-box ul>li>span{
      font-size: 12px;
      color: #6f6f6f
    }
    .msg-box ul>li>span,.course-box ul>li>span,.note-box ul>li>span{
      font-size: 12px;
      color: #6f6f6f
    }
    .msg-box.active,.note-box.active,.course-box.active{
      display: block
    }
    .chatmsg-box.active,.notice-msg-box.active,.question-msg-box.active,.notice-note-box.active,.notice-course-box.active{
      display: block
    }

    .mCSB_inside>.mCSB_container {
      margin-right: 0
    }

    .send-box {
      position: absolute;
      bottom: 0;
      height: 80px;
      background: #201f25;
      width: 100%;
      color: #bcbcbc
    }
    .send-box1 {
      position: absolute;
      bottom: 0;
      height: 80px;
      background: #201f25;
      width: 100%;
      color: #bcbcbc;
      display: none;
    }
    .noteSend{
      position: absolute;
      height:60px;
      bottom: 0px;
      left: 0px;
    }
    .noteSend1{
      position: absolute;
      height:60px;
      bottom: 0px;
      left: 0px;
    }
    .noteSend textarea{
      height: 60px;
      width: 100%;
      resize: none;
      outline: 0;
      background-color: #201f25;
      border: none;
      padding: 10px;
      color: #bcbcbc;
      box-sizing: border-box
    }
    .noteSend1 textarea{
      height: 60px;
      width: 100%;
      resize: none;
      outline: 0;
      background-color: #201f25;
      border: none;
      padding: 10px;
      color: #bcbcbc;
      box-sizing: border-box
    }
    .noteSend .send-chat{
      position: absolute;
      bottom: 5px;
      right: 5px;
    }
    .noteSend1 .send-chat1{
      position: absolute;
      bottom: 5px;
      right: 5px;
    }
    .send-box textarea {
      height: 40px;
      width: 100%;
      resize: none;
      outline: 0;
      background-color: #201f25;
      border: none;
      padding: 10px;
      color: #bcbcbc;
      box-sizing: border-box
    }
    .send-box1 textarea {
      height: 40px;
      width: 100%;
      resize: none;
      outline: 0;
      background-color: #201f25;
      border: none;
      padding: 10px;
      color: #bcbcbc;
      box-sizing: border-box
    }
    .send-box .face {
      position: absolute;
      right: 70px;
      display: inline-block;
      width: 22px;
      height: 22px;
      background-color: red;
      background: url(static/image/chat-icon.png) no-repeat 0 -72px;
      margin-top: 50px
    }
    .send-box1 .face1 {
      position: absolute;
      right: 70px;
      display: inline-block;
      width: 22px;
      height: 22px;
      z-index: 10;
      background-color: red;
      background: url(static/image/chat-icon.png) no-repeat 0 -72px;
      margin-top: 50px
    }

    .send-chat {
      margin-top: 50px;
      position: absolute;
      right: 5px;
      display: inline-block;
      width: 52px;
      height: 20px;
      font-size: 12px;
      line-height: 20px;
      vertical-align: middle;
      background-color: #353540;
      text-decoration: none;
      color: #fff;
      border-radius: 3px;
      text-align: center;
    }
    .send-chat1 {
      margin-top: 50px;
      position: absolute;
      right: 5px;
      display: inline-block;
      width: 52px;
      height: 20px;
      font-size: 12px;
      line-height: 20px;
      vertical-align: middle;
      background-color: #353540;
      text-decoration: none;
      color: #fff;
      border-radius: 3px;
      text-align: center;
      z-index: 10;
    }
    .chatmsg li {
      overflow: hidden;
      padding: 10px 22px;
      text-align: left;
      list-style: none
    }

    .chatmsg li a {
      text-decoration: none
    }

    .chatmsg li img {
      vertical-align: middle
    }

    .chatmsg li .avatar {
      display: inline-block;
      float: left;
      border-radius: 50%;
      overflow: hidden;
      line-height: 0;
      position: absolute;
      left: 15px
    }

    .chatmsg li .msg {
      float: left;
      margin-left: 45px
    }

    .chatmsg li .msg p {
      color: #6f6e6e;
      line-height: 16px;
      font-size: 12px;
      margin: 0
    }

    .chatmsg li .msg p .tips {
      display: inline-block;
      float: left;
      text-align: center;
      border: 1px solid #f33;
      font-size: 12px;
      width: 42px;
      height: 16px;
      line-height: 16px;
      margin-right: 10px
    }

    .chatmsg li .msg p .tips.host {
      color: #f33;
      border: 1px solid #f33
    }

    .chatmsg li .msg p .tips.guest {
      color: #a4824b;
      border: 1px solid #ffc864
    }

    .chatmsg li .msg p .tips.assistant {
      color: #446ea4;
      border: 1px solid #5da6fc
    }

    .chatmsg li .msg p .name {
      display: inline-block;
      color: #6f6e6e;
      width: 128px;
      line-height: 18px;
      vertical-align: middle;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      text-align: left
    }

    .chatmsg li .msg p .time {
      float: right
    }

    .chatmsg li .msg .content {
      line-height: 18px;
      font-size: 14px;
      color: #bcbcbc;
      word-wrap: break-word;
      word-break: break-all;
      margin-top: 8px
    }

    .chatmsg li .msg .content.sys {
      color: #fff
    }

    .chatmsg li .msg .content.sys a {
      color: #f33
    }

    .chatmsg li .msg .content.redp {
      color: #fff
    }

    .chatmsg li .msg .content.redp .name {
      display: inline-block;
      color: #fff;
      width: auto;
      max-width: 128px;
      text-overflow: ellipsis;
      white-space: nowrap;
      text-align: left
    }

    .chatmsg li .msg .content.redi {
      color: #fbd75a
    }

    .question-msg li a {
      text-decoration: none
    }

    .question-msg li {
      overflow: hidden;
      padding: 10px 22px;
      text-align: left;
      list-style-type: none
    }

    .question-msg li .avatar {
      display: inline-block;
      float: left;
      border-radius: 50%;
      overflow: hidden;
      line-height: 0
    }

    .question-msg li .msg {
      margin-left: 45px
    }

    .question-msg li .msg p {
      color: #6f6e6e;
      line-height: 16px;
      font-size: 12px;
      margin: 0;
      padding-right: 10px
    }

    .question-msg li .msg p .tips {
      display: inline-block;
      float: left;
      text-align: center;
      border: 1px solid #f33;
      font-size: 12px;
      width: 42px;
      height: 16px;
      line-height: 16px;
      margin-right: 10px
    }

    .question-msg li .msg p .tips.host {
      color: #f33;
      border: 1px solid #f33
    }

    .question-msg li .msg p .tips.guest {
      color: #a4824b;
      border: 1px solid #ffc864
    }

    .question-msg li .msg p .tips.assistant {
      color: #446ea4;
      border: 1px solid #5da6fc
    }

    .question-msg li .msg p .name {
      display: inline-block;
      color: #6f6e6e;
      width: 128px;
      line-height: 18px;
      vertical-align: middle;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      text-align: left;
      text-decoration: none
    }

    .question-msg li .msg p .time {
      float: right
    }

    .question-msg li .msg .content {
      line-height: 18px;
      font-size: 14px;
      color: #bcbcbc;
      word-wrap: break-word;
      word-break: break-all;
      margin-top: 8px
    }

    .question-msg li .answerlist {
      position: relative;
      margin-left: 42px;
      margin-top: 10px;
      border-radius: 3px;
      border: 1px solid #393940;
      background-color: #202026;
      padding: 10px
    }

    .question-msg li .answerlist .triangle {
      position: absolute;
      top: -10px;
      left: 14px;
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-bottom: 10px solid #37373e;
      font-size: 0;
      line-height: 0
    }

    .question-msg li .answerlist .triangle div {
      position: absolute;
      top: 2px;
      left: -8.5px;
      width: 0;
      height: 0;
      border-left: 8px solid transparent;
      border-right: 8px solid transparent;
      border-bottom: 8px solid #202026;
      font-size: 0;
      line-height: 0
    }

    .question-msg li .answerlist ul li {
      padding: 0
    }

    .question-msg li .answerlist ul li p {
      font-size: 12px;
      color: #909090;
      line-height: 20px;
      vertical-align: middle
    }

    .question-msg li .answerlist ul li p .role {
      color: #f34b46
    }

    .question-msg li .answerlist ul li p .role.host {
      color: #f33
    }

    .question-msg li .answerlist ul li p .role.guest {
      color: #a4824b
    }

    .question-msg li .answerlist ul li p .role.assistant {
      color: #446ea4
    }

    .question-msg li .answerlist ul li p .time {
      float: right
    }

    .question-msg li .answerlist ul li .content {
      color: #e2e1e1;
      word-wrap: break-word;
      word-break: break-all
    }

    body,html {
      height: 100%
    }

    .player-container {
      height: 100%;
      background: #000;
      margin-left: 220px;
      margin-right: 520px
    }

    .video {
      width: 100%;
      height: 100%;
      right: 0;
      background: #000;
      position: relative;
    }
    .Intranet_Runner{
      display: block;
      text-align: left;
      position: absolute;
      margin-left: 220px;
      margin-right: 520px;
      width: 100%;
      right: -520px;
    }
    .doc {
      width: 280px;
      height: 183px;
      -webkit-transition: 0.8s;
      transition: 0.8s;
      background: #444;
      position: absolute;
      top: 0;
      right: 240px;
      z-index: 2;
    }
    .exchange .doc {
      width: 70%;
      height: 100%;
      right: 0;
      z-Index:1;
      margin-left: 220px;
      margin-right: 520px;
    }
    .exchange .video {
      width: 280px;
      height: 180px;
      -webkit-transition: 0.8s;
      transition: 0.8s;
      background: #444;
      position: absolute;
      top: 0;
      right: 240px;
      z-index: 2;
    }
    /*.page-pc .player-container {*/
    /*height: 100%;*/
    /*background: #000;*/
    /*margin-right: 520px*/
    /*}*/

    .page-pc .container {
      width: 520px;
      right: 0;
      top: 0
    }

    /*.page-pc .video {*/
    /*position: absolute;*/
    /*width: 100%;*/
    /*height: 100%;*/
    /*z-index: 4*/
    /*}*/

    /*.page-pc .doc {*/
    /*position: relative;*/
    /*width: 100%;*/
    /*height: 100%;*/
    /*margin-top: 0*/
    /*}*/

    .page-pc .hideVideo {
      display: none
    }

    /*.on {*/
    /*display: none*/
    /*}*/

    .hideVideo {
      position: absolute;
      right: 5px;
      bottom: 40px
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1001;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      background: #e1e1e1
    }

    .modal {
      box-sizing: border-box;
      padding: 50px 0
    }

    .modal li {
      line-height: 30px;
      text-align: center
    }

    .modal li.active {
      color: #f33
    }

    /*.exchange {*/
    /*bottom: 70px*/
    /*}*/

    .page-pc .layer {
      width: 500px;
      margin-left: -250px
    }

    .layer {
      position: fixed;
      top: 50%;
      left: 50%;
      width: 90%;
      height: 350px;
      margin-left: -45%;
      margin-top: -180px;
      z-index: 10000;
      background-color: #fff;
      border: 1px solid #e5e5e5;
      display: none
    }

    .layer-header {
      height: 44px;
      line-height: 44px;
      font-size: 14px;
      border-top: 1px solid #e5e5e5;
      border-bottom: 1px solid #e5e5e5;
      color: #4e4e4e;
      background-color: #f7f7f7;
      text-align: center;
      position: relative
    }

    .layer-header img {
      width: 13px;
      height: 14px;
      position: absolute;
      right: 20px;
      top: 16px;
      cursor: pointer
    }

    .layer-textarea {
      width: 80%;
      height: 200px;
      margin: auto;
      display: block;
      resize: none;
      outline: 0;
      margin-top: 20px
    }

    .layer-btn {
      display: block;
      margin: auto;
      margin-top: 20px;
      background-color: #f15c5c;
      color: #fff;
      text-align: center;
      height: 40px;
      line-height: 40px;
      cursor: pointer;
      width: 80%;
      border-radius: 4px;
      border: 0
    }

    .page-pc .sign {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 500px;
      height: 350px;
      margin-left: -250px;
      margin-top: -180px;
      -webkit-transform: translate(0,0);
      transform: translate(0,0);
      display: none
    }

    .page-pc .sign.active {
      display: block
    }

    .sign.active {
      -webkit-transform: translate(0,0);
      transform: translate(0,0)
    }

    .sign {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
      z-index: 11;
      background-color: #fff;
      -webkit-transition: all .3s ease-in-out;
      transition: all .3s ease-in-out;
      -webkit-transform: translate(0,100%);
      transform: translate(0,100%);
      font-size: 12px
    }

    .sign.active {
      -webkit-transform: translate(0,0);
      transform: translate(0,0)
    }

    .sign-header {
      height: 44px;
      line-height: 44px;
      font-size: 14px;
      border-top: 1px solid #e5e5e5;
      border-bottom: 1px solid #e5e5e5;
      color: #4e4e4e;
      background-color: #f7f7f7;
      text-align: center;
      position: relative
    }

    .sign-header img {
      width: 13px;
      height: 14px;
      position: absolute;
      right: 20px;
      top: 16px;
      cursor: pointer
    }

    .page-pc .sign-img {
      display: none
    }

    .sign-img {
      width: 22px;
      margin: auto;
      display: block;
      margin-top: 25px
    }

    .page-pc .sign-title {
      font-size: 20px;
      color: #333;
      font-weight: 700;
      margin-top: 50px
    }

    .sign-title {
      color: #f15c5c;
      text-align: center;
      margin-top: 15px
    }

    .sign-time {
      text-align: center;
      margin-top: 25px;
      color: #4e4e4e
    }

    .sign-time>span {
      color: #f15c5c
    }

    .sign-btn {
      display: block;
      margin: auto;
      margin-top: 50px;
      background-color: #f15c5c;
      color: #fff;
      text-align: center;
      height: 40px;
      line-height: 40px;
      cursor: pointer;
      width: 80%;
      border-radius: 4px;
      border: 0
    }

    .help-wrap {
      position: absolute;
      top: 100px;
      z-index: 10;
      right: 0
    }

    .page-pc #exchange,.page-pc #hideVideo {
      display: none
    }

    .help-tool {
      position: absolute;
      right: 10px;
      width: 50px;
      padding: 5px 0;
      text-align: center;
      border-radius: 15px;
      font-size: 12px;
      color: #3385ff;
      cursor: pointer;
      background-color: rgba(255,255,255,.6);
      cursor: pointer
    }

    .help-item {
      position: absolute;
      width: 115px;
      background-color: red;
      right: -10px;
      font-size: 14px;
      padding: 5px;
      text-decoration: none;
      color: #3385ff;
      background-color: rgba(255,255,255,.6);
      -webkit-transition: all .3s cubic-bezier(.08,.13,0,1.27);
      transition: all .3s cubic-bezier(.08,.13,0,1.27);
      -webkit-transform: translate(100%,0);
      transform: translate(100%,0)
    }

    .help-item.active {
      -webkit-transform: translate(0,0);
      transform: translate(0,0)
    }

    #userEvent {
      top: 40px
    }

    #userData {
      top: 80px
    }

    #exchange {
      top: 120px
    }

    #hideVideo {
      top: 160px
    }
    .livePageCenterLeft {
      position: absolute;
      top: 0;
      left: 0;
      width: 220px;
      box-sizing: border-box;
      height: 100%;
      background-color: #201f25;
      z-index: 30;
    }
    .livePageCenterLeft .person {
      margin: 15px auto;
      width: 240px;
      height: 140px;
      box-sizing: border-box;
      padding: 25px 5px;
      /*border-bottom: solid 2px #2e343c;*/
    }
    .livePageCenterLeft .person img {
      float: left;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-repeat: no-repeat;
      background-size: 100% 100%;
    }
    .livePageCenterLeft .person .perinfo {
      width: 163px;
      float: right;
      font-size: 12px;
      color: #d6d6d7;
      line-height: 26px;
      margin-top: 5px;
      margin-left: 5px;
    }
    .livePageCenterLeft .person .perinfo p {
      margin: 0;
    }
    .livePageCenterLeft .person .name {
      font-size: 14px;
      color: #fff;
      line-height: 26px;
    }
    .livePageCenterLeft .courseIntro {
      height: 85px;
      -webkit-box-sizing: border-box;
      box-sizing: border-box;
      padding: 15px;
      margin-bottom: 10px;
      color: #fff;
      font-size: 14px;
      line-height: 24px;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
    }
    .livePageCenterLeft .courseTitle {
      color: #fff;
      font-size: 14px;
      height: 25px;
      line-height: 25px;
      padding-left: 15px;
      padding-bottom: 15px;
    }
    .livePageCenterLeft .onlineUser {
      padding-left: 15px;
      width: 100%;
      box-sizing: border-box;
      /*background-color: #2f353d;*/
      line-height: 36px;
      font-size: 14px;
      color: #82878c;
      height:-moz-calc(100% - (140px + 85px + 40px + 28px + 15px));
      height:-webkit-calc(100% - (140px + 85px + 40px + 28px + 15px));
      height: calc(100% - (140px + 85px + 40px + 28px + 15px));
    }
    .livePageCenterLeft .onlineUser ul{
      width: 100%;
      height: 100%;
      padding: 0px;
      margin: 0px;
    }
    .livePageCenterLeft .onlineUser ul li{
      padding:2px 0px;
      list-style: none;
    }
    .livePageCenterLeft .onlineUser ul li div{
      width: 25px;
      height: 25px;
      border-radius: 25px;
      word-wrap: break-word;
      overflow: hidden;
      display: inline-block;
      vertical-align: middle;
    }
    .livePageCenterLeft .onlineUser ul li div img{
      width: 100%;
      height: 100%;
      border-radius: 100%;
    }
    .livePageCenterLeft .onlineUser ul li span{
      font-size: 14px;
      color: #6f6f6f;
      display: inline-block;
      vertical-align: middle;
      padding-left:5px;
    }
    .mCustomScrollBox{
      /*margin-bottom: 180px!important;*/
    }
  </style>
</head>
<body class="page-pc">
<div class="layer" id="userCusEvent">
  <div class="layer-header">
    测试自定义消息
    <img src="static/image/modal-close.png" />
  </div>
  <div class="layer-content">
    <textarea class="layer-textarea"></textarea>
    <button class="layer-btn">发送消息</button>
  </div>
</div>
<div class="layer" id="userinfo">
  <div class="layer-header">
    测试更新用户昵称
    <img src="static/image/modal-close.png" />
  </div>
  <div class="layer-content">
    <textarea class="layer-textarea">新的昵称</textarea>
    <button class="layer-btn">发送消息</button>
  </div>
</div>
<!----left-->
<div class="livePageCenterLeft">
  <div class="person clearfix">
    <img src="" alt="" class="courseImg"/>
    <div class="perinfo">
      <p class="courseName"></p>
      <p class="courseLevel"></p>
    </div>
  </div>
  <div class="courseIntro">
  </div>
  <div class="courseTitle">用户信息列表</div>
  <div class="onlineUser">
    <marquee style="width: 100%;height: 100%" direction="up" scrollamount='2' scrolldelay='10' onMouseOut="this.start()" onMouseOver="this.stop()" >
      <ul class="onlineUserInfo" style="padding: 10px 0px">

      </ul>
    </marquee>
  </div>
</div>
<!----video-->
<div class="player-container">
  <div class="video" id="video"></div>
  <div class="doc" id="doc"></div>
</div>
<!----right边框-->
<div class="container">
  <div class="container_left" style="width: 280px;height: 100%;position: relative">
    <div class="flash-box">
      <div class="flash-box-btn">
        <span class="fl"><a class="move" href="javascript:;" style="color:white;font-size:12px;text-decoration: none"></a></span>
        <!--<span class="fr"><a class="close" href="javascript:;"></a></span>-->
      </div>
      <div class="flash">
      </div>
    </div>
    <div class="sign">
      <div class="sign-header">
        签到
        <img src="static/image/modal-close.png" />
      </div>
      <div class="sign-content">
        <img class="sign-img" src="static/image/sign-icon.png" />
        <div class="sign-title">
          主持人发起了签到
        </div>
        <div class="sign-time">
          您还有
          <span class="sign-second">0秒</span>钟签到时间
        </div>
        <button class="sign-btn">签到</button>
      </div>
    </div>
    <div class="header">
      <a href="javascript:;" data-target="chatmsg-box" class="active">聊天</a>
      <!--<a href="javascript:;" data-target="question-msg-box">问答</a>-->
      <a href="javascript:;" data-target="notice-msg-box">公告</a>
      <!--<a href="javascript:;" data-target="notice-note-box">笔记</a>-->
    </div>
    <!--聊天-->
    <div class="chatmsg-box tab-pane active">
      <div class="chatmsg" id="chatmsg">
        <ul class="chatList">

        </ul>
      </div>
    </div>
    <!--公告-->
    <div class="notice-msg-box tab-pane mCustomScrollbar">
      <div class="notice-msg" id="notice-msg">
        <ul>
        </ul>
      </div>
    </div>
    <div class="send-box">
      <a id="face"  class="face"></a>
      <a id="sendChat"  class="send-chat">发送</a>
      <textarea id="mywords"></textarea>
    </div>
  </div>
  <div class="container_right" style="width: 240px;height: 100%;position: absolute;top: 0;right: 0;background-color: #282830;color: #bcbcbc;font-size: 14px;">
    <div class="header1">
      <a href="javascript:;" data-target="course-box" class="active">目录</a>
      <a href="javascript:;" data-target="msg-box">问答</a>
      <a href="javascript:;" data-target="note-box">笔记</a>
    </div>
    <!--目录-->
    <div class="course-box tab-pane1 mCustomScrollbar active">
      <div class="notice-note" id="courseMsg">
        <ul class="noteList">
          <li>目录1</li>
          <li>目录2</li>
        </ul>
      </div>
    </div>
    <!--问答-->
    <div class="msg-box tab-pane1 mCustomScrollbar">
      <div class="question-msg" id="questionMsg">
        <ul class="questionList">
          <li>问答1</li>
          <li>问答2</li>
          <li>问答3</li>
        </ul>
      </div>
    </div>
    <!--笔记-->
    <div class="note-box tab-pane1 mCustomScrollbar">
      <div class="notice-note" id="noteMsg">
        <ul class="noteList">
          <li>笔记1</li>
          <li>笔记2</li>
          <li>笔记3</li>
        </ul>
      </div>
    </div>
    <div class="send-box1">
      <a class="face1"></a>
      <a class="send-chat1" id="sendChat1">发送</a>
      <textarea class="myWords1"></textarea>
    </div>
  </div>
</div>
<div class="modal" id="modal">
  <ul id="lines"></ul>
  <ul id="definitions"></ul>
</div>
<script>development="dev"</script>

<script src="static/jquery-1.9.1.min.js"></script>
<script src="static/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="static/vhallSDK.js"></script>
<script src="static/underscore-min.js"></script>
<script src="static/md5.js"></script>
<script src="static/sign.js"></script>
<script>
  let roomNo = 0;
  $(document).ready(function() {
    let parameter = location.href.split("?")[1].split("&");
    let courseId = parameter[0].split("=")[1];
    let onorsome = parameter[1].split("=")[1];
    roomNo = parameter[2].split("=")[1];
    let userId = parameter[5].split("=")[1];

//    var userId= JSON.parse(window.localStorage.userInfo).userId;
//    console.log(JSON.parse(window.localStorage.userInfo));

    var addTime=location.datetime;

    courseGroup();
    noteGroup();
    userListInfo();
    setInterval(() => {
      userList();
    },10000);
    // 左侧，讲师课程信息
    function courseGroup(){
      $.ajax({
        type: "get",
        url: "http://120.78.13.237:8080/schoolapi-1.0.0/course/getInfo/",
        data: {courseId:courseId, onorsome:onorsome},
        dataType: "json",
        success: function(data){
          var sucData = JSON.stringify(data);
          var sucDatas = JSON.parse(sucData);
//          课程详情信息
          var courseData = sucDatas.course;
          console.log(courseData.type);
          if(courseData.type == 7){
            $(".doc").css('display','none');
            $(".flash-box").css('display','none');
            $('.header').css('top','0');
          }
          //          讲师头像
          $('.courseImg').attr("src",'"'+courseData.teacherPhoto+'"');
//          讲师名字
          $(".courseName").text(courseData.teacherName);
//          讲师级别
          if(courseData.adaptiveUser!== null){
            $(".courseLevel").text('讲师级别：'+courseData.adaptiveUser);
          }else{
            $(".courseLevel").text('讲师级别：该会员暂无级别');
          }
//          课程介绍
          $(".courseIntro").text('课程介绍：'+courseData.profiles);
        }
      });
    }
    // 右侧，笔记列表信息
    function noteGroup(){
      $.ajax({
        type: "get",
        url: "http://120.78.13.237:8080/schoolapi-1.0.0/coursenotes/selectMycourseNote",
        data: {courseId:courseId,userId:userId},
        dataType: "json",
        success: function(dataObj){
          var noteData = JSON.stringify(dataObj);
          var noteDatas = JSON.parse(noteData);
          //  笔记信息
          var noteDataGroup = noteDatas.dataList;
          //  添加笔记列表
          $.each(noteDataGroup,function(i,data){
            //  Li的排列顺序
            var noteLi='<li><div>'+data.comments+'</div><span>'+data.addTime+'</span></li>';
            $(".noteList").append(noteLi);
          });
        }
      });
    }
    //    左侧，入口用户信息
    function userListInfo() {
      $.ajax({
        type: "get",
        url: "http://120.78.13.237:8080/schoolapi-1.0.0/sys/user/getUserByWebinarId",
        data: { sign:1,userId:userId,roomId:roomNo},
        dataType: "json",
        success: function(dataObj){
          console.log(dataObj);
        }
      });
    }
    //    用户列表信息
    function userList() {
      $.ajax({
        type: "get",
        url: "http://120.78.13.237:8080/schoolapi-1.0.0/sys/user/getUserByWebinarId",
        data: { sign:2, state:1, roomId:roomNo, limit:10000, page:1},
        dataType: "json",
        success: function(dataObj){
          var watcher = dataObj.page.list;
            $.each(watcher,function(i,data){
              //  Li的排列顺序
              var noteLi='<li><div>'+'<img src='+ data.head +'>'+'</div><span>'+data.nikename+'</span></li>';
              $(".onlineUserInfo").find("li").remove();
              $(".onlineUserInfo").append(noteLi);
            });
        }
      });
    }

//    var courseName$(".courseName").text(courseData.teacherName);
//    addNoteGroup();
//    // 右侧，添加笔记
//    function addNoteGroup(){
//      $.ajax({
//        type: "get",
//        url: "http://192.168.2.66/coursenotes/save",
//        data: {courseId:courseId,studentId:userId,addTime:addTime,comments:comments},
//        dataType: "json",
//        success: function(){
////          $(".courseName").text(courseData.teacherName);
//        }
//      });
//    }

//	function t(t) {
//		var o = new RegExp("(^|&)" + t + "=([^&]*)(&|$)", "i"),
//		e = window.location.search.substr(1).match(o);
//		return null != e ? unescape(e[2]) : ""
//	} (function() {
//	    for (var t = navigator.userAgent, o = ["Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod"], e = !0, n = 0; n < o.length; n++) if (t.indexOf(o[n]) > 0) {
//	        e = !1;
//	        break
//	    }
//	    return e
//	})() && $("body").addClass("page-pc"),

    $("#exchange").click(function() {
      $("#modal").show()
    }),

      $("#lines").on("click", "li", function() {
        var t = $(this).text();
        $(this).siblings("li").removeClass("active"),
          $(this).addClass("active"),
          VHALL_SDK.player.setPlayerLine(t),
          $("#modal").hide(),
          $(".help-tool").click()
      }),

      $("#definitions").on("click", "li", function() {
        var t = $(this).text();
        $(this).siblings("li").removeClass("active"),
          $(this).addClass("active"),
          VHALL_SDK.player.setPlayerDefinition(t),
          $("#modal").hide(),
          $(".help-tool").click()
      }),

      $(".header").on("click", "a", function() {
        var t = $(this).attr("data-target");
        $(".header a").removeClass("active"),
          $(this).addClass("active"),
          $(".tab-pane").removeClass("active"),
          $("." + t).addClass("active"),
          "notice-msg-box" == t ? $(".send-box").hide() : $(".send-box").show()
      }),

      $(".header1").on("click", "a", function(index) {
          var t = $(this).attr("data-target");
          $(".header1 a").removeClass("active")
          $(this).addClass("active")
          $(".tab-pane1").removeClass("active"),
          $("." + t).addClass("active")
          "course-box" == t ? $(".send-box1").hide() : $(".send-box1").show()
      }),

      $("#userEvent").click(function() {
        $("#userCusEvent").show(),
          $("#userCusEvent .layer-textarea").val(JSON.stringify({
            type: "xxx_event",
            data: {
              id: 1,
              name: "test"
            }
          }))
      }),

      $("#userCusEvent img").click(function() {
        $("#userCusEvent").hide()
      }),

      $("#userCusEvent .layer-btn").click(function() {
        try {
          var t = JSON.parse($("#userCusEvent .layer-textarea").val());
          VHALL_SDK.sendCustomEvent(t),
            $("#userCusEvent img").click()
        } catch(t) {
          alert("JSON不合法")
        }
      }),

      $("#userData").click(function() {
        $("#userinfo").show()
      }),

      $("#userinfo img").click(function() {
        $("#userinfo").hide()
      }),

      $("#userinfo .layer-btn").click(function() {
        var t = $("#userinfo .layer-textarea").val();
        VHALL_SDK.updateUserInfo(t),
          $("#userinfo img").click()
      }),
      $(".move").click(function () {
        $(".player-container ").toggleClass("exchange");
//            $(".doc").toggleClass("on");
      })

//	$("#video").toggleClass("on"),
//	$("#doc").toggleClass("exchange")
//VHALL_SDK.getUserinfo(t);
//	console.log(t);
  });
//  浏览器返回点击触发
  jQuery(document).ready(function($) {
    if (window.history && window.history.pushState) {
      $(window).on('popstate', function() {
        var hashLocation = location.hash;
        var hashSplit = hashLocation.split("#!/");
        var hashName = hashSplit[1];

        if (hashName !== '') {
          var hash = window.location.hash;
          if (hash === '') {
            $.ajax({
              type: "get",
              url: "http://120.78.13.237:8080/schoolapi-1.0.0/sys/user/updateOnlineUserState",
              data: {roomId:roomID,state:0},
              dataType: "json",
              success: function(data){
                if(data.msg === "修改成功!"){
                  window.history.go(-1);
                }
      //          $(".courseName").text(courseData.teacherName);
              }
            });
          }
        }
      });
      window.history.pushState('', null, '');
    }
  });

  let params = location.href.split("?")[1].split("&");
  const timestamp = Date.parse(new Date());
  const roomID = params[2].split("=")[1];
  const  username =  params[3].split("=")[1];
  const  userID = params[4].split("=")[1];
  const  email =  'test@test.com';

  //初始化
  VHALL_SDK.init({
    app_key: app_key,
    signedat: timestamp,
    email: email,
    roomid: roomID,
    account: userID,
    username: username,
    sign: sign(roomID, userID, email, username, timestamp),
    facedom: "#face",
    textdom: "#mywords",
    videoContent: "#video",
    docContent: "#doc"
  });

  //var o = _.template($("#chat-template").html()),
  //e = _.template($("#question-template").html());
  //接收到用户自定义广播消息后触发事件
  VHALL_SDK.on("customEvent", function(t) {
    alert(JSON.stringify(t))
  }),
//直播收到聊天消息
    VHALL_SDK.on("chatMsg", function(t) {
      $("#chatmsg").append(o(t)),
        $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "99999")
    }),
//直播问答消息
    VHALL_SDK.on("questionMsg", function(t) {
      console.log(t),
        $("#question-msg").append(e(t)),
        $(".question-msg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "99999")
    }),
//SDK准备就绪后触发事件，全局事件
    VHALL_SDK.on("ready", function() {
      VHALL_SDK.vhall_get_history_notice(),
        1 == VHALL_SDK.getRoominfo().type ? (VHALL_SDK.vhall_get_live_history_chat_msg(), 1 == VHALL_SDK.getRoominfo().openQuestion && VHALL_SDK        .vhall_get_live_history_question_msg()) : VHALL_SDK.vhall_get_record_history_chat_msg()
    }),
//SDK调用错误事件消息，全局事件
    VHALL_SDK.on("error", function(t) {
      alert("发生错误: " + JSON.stringify(t))
    }),
//    用户上线事件消息
    VHALL_SDK.on("userOnline", function(t) {
      console.log(t)
    }),
//    用户下线事件消息
    VHALL_SDK.on("userOffline", function(t) {
      console.log(t)
    }),
//    发送签到请求后触发事件
    VHALL_SDK.on("sendSign", function(t) {
      console.log(t)
    }),
//发送更新用户信息请求后触发事件
    VHALL_SDK.on("UpdateUser", function(t) {
      console.log(t)
    }),
    VHALL_SDK.on("sendCustomEvent",
      function(t) {
        console.log(t)
      }),
    VHALL_SDK.on("sendChat",
      function(t) {
        if (200 == t.code) {
          console.log(t.data);
          var msgData = JSON.stringify(t.data);
          var newMsgData = JSON.parse(msgData);
          var chatA = "";
          $.each(newMsgData,
            function (t, e) {
              chatA = "<li><div>"+ e.data.content + "</div><span>" + e.data.created_at + "</span></li>" + chatA
            })
          $('.chatList').append(questionA);
          setTimeout(function() {
              $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")
            },
            50)
        }
      }),
    VHALL_SDK.on("sendQuestion",
      function(t) {
        console.log(t);
      }),
    VHALL_SDK.on("disableChat",
      function(t) {
        console.log("禁言", t)
      }),
    VHALL_SDK.on("permitChat",
      function(t) {
        console.log("恢复禁言", t)
      }),
    VHALL_SDK.on("forbidChat",
      function(t) {
        console.log("全体禁言", t)
      }),
    VHALL_SDK.on("kickout",
      function(t) {
        console.log("踢出", t)
      }),
    VHALL_SDK.on("kickoutRestore",
      function(t) {
        console.log("恢复踢出", t)
      }),
//     [questionSwitch 直播问答开关消息]msg [msg.status 1：开启，0：关闭]
    VHALL_SDK.on("questionSwitch", function(t) {
      console.log(t);
      1 == t.status ? alert("问答已开启") : alert("问答已关闭")
    }),

    Date.prototype.Format = function(t) {
      var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours() % 12 == 0 ? 12 : this.getHours() % 12,
        "H+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        S: this.getMilliseconds()
      };
      /(y+)/.test(t) && (t = t.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
      for (var e in o) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? o[e] : ("00" + o[e]).substr(("" + o[e]).length)));
      return t
    },
//收到公告消息时候触发
    VHALL_SDK.on("announcement", function(t) {
      var o = "<li><div>" + t + "</div><span>" + (new Date).Format("yyyy-MM-dd HH:mm:ss") + "</span></li>";
      $("#notice-msg>ul").append(o)
    }),
//拉取历史直播公告消息后触发事件
    VHALL_SDK.on("vhall_history_notice", function(t) {
      if ("200" == t.code) {
        var o = "";
        $.each(t.data.data,
          function(t, e) {
            o = "<li><div>" + JSON.parse(e.content).content + "</div><span>" + e.created_at + "</span></li>" + o
          }),
          $("#notice-msg>ul").html(o)
      } else console.log(t.msg)
    }),
//接收到签到消息后触发事件
    VHALL_SDK.on("startSign", function(t) {function o() {
      setTimeout(function() {
          e.text(--n + "秒"),
            0 != n && $(".sign").hasClass("active") ? o() : ($(".sign").removeClass("active"), e.text("0秒"), e = null)
        },
        1e3)
    }
//获取时间
      var e = $(".sign .sign-second"),
        n = t.sign_show_time;
      e.text(n + "秒"),
        $(".sign").data("signID", t.sign_id).addClass("active"),
        $(".sign-btn").click(function() {
          $(".sign").removeClass("active"),
            VHALL_SDK.sendSign($(".sign").data("signID"))
        }),
        o()
    }),
//直播活动结束，全局事件
    VHALL_SDK.on("streamOver", function(t) {
      alert("活动已结束")
    }),
//    活动开始推流，全局事件
    VHALL_SDK.on("publishStart", function(t) {
      alert("活动开始推流")
    }),
//拉取直播历史消息后触发事件
    VHALL_SDK.on("vhall_live_history_chat_msg", function(t) {
      console.log(t);
      if (200 == t.code) {
        var newMsgData = t.data;
        var chatA = "";
        $.each(newMsgData,
          function (t, e) {
            chatA = "<li><div>"+ e.content + "</div><span>" + e.time + "</span></li>" + chatA
          })
        $('.chatList').append(chatA);
        setTimeout(function() {
            $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")
          },
          50)
      }
    }),
    VHALL_SDK.on("vhall_record_history_chat_msg",
      function(t) {
//        if (200 == t.code) {
//          var e = "";
//          $("#chatmsg").data("curr_page", t.curr_page);
//          for (var n = t.data.length - 1; n >= 0; n--) e += o(t.data[n]);
//          1 == t.curr_page ? ($("#chatmsg").html(e), setTimeout(function() {
//              $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")
//            },
//            50)) : ($("#chatmsg").prepend(e), $(".chartlist").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "20px"))
//        }
      }),
    VHALL_SDK.on("getQuestionList",
      function(t) {
        if (200 == t.code) {
          var msgData = JSON.stringify(t.data);
          var newMsgData = JSON.parse(msgData);
          var questionA = "";
          $.each(newMsgData,
            function (t, e) {
              questionA = "<li><div>"+ e.data.content + "</div><span>" + e.data.created_at + "</span></li>" + questionA
            })
          $('.questionList').append(questionA);
        }
        if (200 == t.code) {
//for (var o = "",
//n = t.data.length - 1; n >= 0; n--) o += e(t.data[n]);
//$("#question-msg").append(o),
          setTimeout(function() {
              $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")
            },
            50)
        }
      }),
    $(".chatmsg-box").mCustomScrollbar({
      scrollInertia: 200,
      callbacks: {
        onTotalScrollBack: function() {
          if ("1" != VHALL_SDK.room.type) {
            var t = parseInt($("#chatmsg").data("curr_page"));
            VHALL_SDK.vhall_get_record_history_chat_msg(t + 1)
          }
        }
      }
    }),
    function send(msg){
      console.log('我是笔记'+msg);
    },
    //  发送列表
    $("#sendChat").click(function() {
      console.log(11111);
      var t = $("#mywords").val(),
        n = null;
      if($(".tab-pane.active").hasClass("chatmsg-box")){
        n = VHALL_SDK.sendChat({
          text: t
        });
        $("#chatmsg").append(n);
        $("#mywords").val("");
        $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
      }else if($(".tab-pane.active").hasClass("question-msg-box")){
        n = VHALL_SDK.sendQuestion({
          text: t
        });
        $("#question-msg").append(n);
        $("#mywords").val("");
        $(".question-msg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
      }else if($(".tab-pane.active").hasClass("notice-msg-box")){
        $(".notice-msg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
      }else if($(".tab-pane.active").hasClass("notice-note-box")) {
        addNoteGroup();
//      console.log($("#mywords").val());
//      $(".notice-note-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
//      $(".noteList").append('<li><div>' + $("#mywords").val() + '</div><span>' + getNowFormatDate() + '</span></li>');

      }


      var url=location.href;
      var tmp1=url.split("?")[1];
      var tmp2=tmp1.split("&")[0];
      var tmp3 = tmp1.split("&")[1];

      var courseId1 = tmp2.split("=")[1];
      var courseId = decodeURI(courseId1);

      var userId1= JSON.parse(window.localStorage.userInfo).userId;
      var getNowFormat  = getNowFormatDate();

      //    // 右侧，添加笔记
      function addNoteGroup(){
        var mywords = $("#mywords").val();
        $.ajax({
          type: "post",
          url: "http://120.78.13.237:8080/schoolapi-1.0.0/coursenotes/save",
          data: {courseId:courseId,studentId:userId1,addTime:getNowFormat,comments:mywords},
          dataType: "json",
          success: function(){
            console.log('courseId=='+courseId+'studentId=='+userId1+'addTime==='+getNowFormat+'comments======='+mywords);

            $(".noteList").append('<li><div>' + $("#mywords").val() + '</div><span>' + getNowFormatDate() + '</span></li>');
          },
          error:function () {
            alert(error);
          }
        });
      }
      // 获取当前时间yyyy-MM-dd HH:mm:ss
      function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var seperator2 = ":";
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
          month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
          strDate = "0" + strDate;
        }
        var currentdate = year + seperator1 + month + seperator1 + strDate
          + " " + date.getHours() + seperator2 + date.getMinutes()
          + seperator2 + date.getSeconds();
        return currentdate;
      }

//$(".tab-pane.active").hasClass("chatmsg-box") ? ((n = VHALL_SDK.sendChat({
//text: t
//})) && $("#chatmsg").append(n), $("#mywords").val(""), $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")) :
//        ((n = VHALL_SDK.sendQuestion({
//text: t
//}))&& $("#question-msg").append(n), $("#mywords").val(""), $(".question-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")) ||
//        ((n = VHALL_SDK.sendChat({
//text: t
//})) && $("#notice-note").append(n), $("#mywords").val(""), $(".notice-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999"))
    }),

    //  发送列表
    $("#sendChat1").click(function() {
      var t = $("#myWords1").val(),
        n = null;
      if($(".tab-pane1.active").hasClass("msg-box")){
        console.log(t);
        n = VHALL_SDK.sendQuestion({
          text: t
        });
        $("#questionMsg").append(n);
        $("#myWords1").val("");
        $(".msg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
      }else if($(".tab-pane1.active").hasClass("note-box")) {
        addNoteGroup();
//      console.log($("#mywords").val());
//      $(".notice-note-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999");
//      $(".noteList").append('<li><div>' + $("#mywords").val() + '</div><span>' + getNowFormatDate() + '</span></li>');

      }


      var url=location.href;
      var tmp1=url.split("?")[1];
      var tmp2=tmp1.split("&")[0];
      var tmp3 = tmp1.split("&")[1];

      var courseId1 = tmp2.split("=")[1];
      var courseId = decodeURI(courseId1);

      var userId1= JSON.parse(window.localStorage.userInfo).userId;
      var getNowFormat  = getNowFormatDate();

      //    // 右侧，添加笔记
      function addNoteGroup(){
        var mywords = $("#mywords").val();
        $.ajax({
          type: "post",
          url: "http://120.78.13.237:8080/schoolapi-1.0.0/coursenotes/save",
          data: {courseId:courseId,studentId:userId1,addTime:getNowFormat,comments:mywords},
          dataType: "json",
          success: function(){
            console.log('courseId=='+courseId+'studentId=='+userId1+'addTime==='+getNowFormat+'comments======='+mywords);

            $(".noteList").append('<li><div>' + $("#mywords").val() + '</div><span>' + getNowFormatDate() + '</span></li>');
          },
          error:function () {
            alert(error);
          }
        });
      }
      // 获取当前时间yyyy-MM-dd HH:mm:ss
      function getNowFormatDate() {
        var date = new Date();
        var seperator1 = "-";
        var seperator2 = ":";
        var year = date.getFullYear();
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
          month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
          strDate = "0" + strDate;
        }
        var currentdate = year + seperator1 + month + seperator1 + strDate
          + " " + date.getHours() + seperator2 + date.getMinutes()
          + seperator2 + date.getSeconds();
        return currentdate;
      }

//$(".tab-pane.active").hasClass("chatmsg-box") ? ((n = VHALL_SDK.sendChat({
//text: t
//})) && $("#chatmsg").append(n), $("#mywords").val(""), $(".chatmsg-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")) :
//        ((n = VHALL_SDK.sendQuestion({
//text: t
//}))&& $("#question-msg").append(n), $("#mywords").val(""), $(".question-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999")) ||
//        ((n = VHALL_SDK.sendChat({
//text: t
//})) && $("#notice-note").append(n), $("#mywords").val(""), $(".notice-box").mCustomScrollbar("update").mCustomScrollbar("scrollTo", "999999"))
    }),
    VHALL_SDK.on("playerError",
      function(t) {
        console.log(t)
      }),
    VHALL_SDK.on("playerReady",function() {
      VHALL_SDK.player.on("canPlayLines",function(t) {
        var o = "";
        t.forEach(function(t) {
          o += "<li>" + t + "</li>"
        }),
          $("#lines").html(o).find("li").eq(0).addClass("active")
      }),
        VHALL_SDK.player.on("canPlayDefinitions",function(t) {
          var o = "";
          t.forEach(function(t) {
            o += "<li>" + t + "</li>"
          }),
            $("#definitions").html(o).find("li").eq(0).addClass("active")
        })
    }),
    $(".sign-header>img").click(function(t) {
      t.stopPropagation(),
        $(".sign").removeClass("active"),
        $(".sign .sign-second").text("0秒")
    }),
    $(".help-tool").click(function(t) {
      $("#userEvent").toggleClass("active"),
        setTimeout(function() {
            $("#userData").toggleClass("active")
          },
          100),
        setTimeout(function() {
            $("#exchange").toggleClass("active")
          },
          200),
        setTimeout(function() {
            $("#hideVideo").toggleClass("active")
          },
          300)
    });
</script>
<script type="text/template" id="chat-template">
  <li uid="<%= user_id%>">
    <a class="avatar" href="javascript:;" title="<%= user_name%>"><img src="<%= avatar%>" width="32" height="32" onerror="this.src='static/image/head50.png'" class=""></a>
    <div class="msg">
      <p> <% if (role == 'assistant') {%> <a class="tips assistant" href="javascript:;">助理</a> <% } else if (role == 'host') {%> <a class="tips host" href="javascript:;">主持人</a> <% } else if (role == 'guest') {%> <a class="tips guest" href="javascript:;">嘉宾</a> <% } %> <a class="name" href="javascript:;" title="<%= user_name%>"> <%= user_name%> </a>
      </p>
      <p class="content"> <% print(content) %> </p>
    </div>
  </li>
</script>
<script type="text/template" id="question-template">
  <li question-id="<%= data.id %>" uid="<%= data.join_id %>">
    <a class="avatar" href="javascript:;"><img src="//cnstatic01.e.vhall.com/static/images/watch/question.png" width="32" height="32"></a>
    <div class="msg">
      <p>
        <a class="name" href="javascript:;" title="<%= data.nick_name%>"> <%= data.nick_name%> </a>
        <span class="time"><%= data.created_at %></span></p>
      <p class="content"> <%= data.content %> </p>
    </div> <% if (data.answer) {
    switch (data.answer.role_name) {
    case 'host' :
    data.answer.role = '主持人';
    break;
    case 'guest' :
    data.answer.role = '嘉宾';
    break;
    default :
    data.answer.role = '助理';
    break;
    }
    %> <div class="answerlist" answer-id="<%= data.answer.id %>">
    <div class="triangle">
      <div></div>
    </div>
    <ul>
      <li>
        <p> <%= data.answer.nick_name %> |
          <a class="role <%=  data.answer.role_name %>" href="javascript:;"> <%=  data.answer.role %>回答</a>
          <span class="time"><%= data.answer.created_at %></span>
        </p>
        <p class="content"> <%= data.answer.content %> </p>
      </li>
    </ul>
  </div> <%}%> </li>
</script>
</body>
</html>
